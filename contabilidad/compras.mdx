---
title: "Compras"
description: "Sistema avanzado de gesti√≥n de compras que automatiza la descarga desde el SII y genera asientos contables de forma inteligente."
---

## üè† Vista Principal de Compras

### Acceso al Sistema

- **Ruta**: Dashboard ‚Üí Compras
- **Permisos requeridos**: Administrador, Jefe Contable, Contador General, Contador Junior, Usuario de Operaciones, Auditor, Supervisor

### Panel de Control

La vista principal presenta:

- **Asientos Pendientes**: Contador visual que indica cu√°ntos asientos contables faltan por generar
- **Tabla de compras**: Lista completa con filtros avanzados y acciones detalladas

## üîß Funciones Principales del Sistema

<CardGroup cols={2}>
  <Card title="Obtener Compras Autom√°ticas" icon="download" color="#0066cc">
    Descarga autom√°tica desde el SII del mes actual
  </Card>
  <Card title="Asignaci√≥n Masiva de Centros" icon="sitemap" color="#17a2b8">
    Asigna centros de costo a m√∫ltiples compras simult√°neamente
  </Card>
  <Card title="Generaci√≥n Masiva de Asientos" icon="calculator" color="#17a2b8">
    Crea asientos contables para todas las compras del mes
  </Card>
  <Card title="Gesti√≥n Individual" icon="edit" color="#6c757d">
    Administra cada compra con precisi√≥n y detalle
  </Card>
</CardGroup>

### 2.1 Obtener Compras Autom√°ticas

- **Bot√≥n**: "Obtener Compras Autom√°ticas" (Azul/Primary)
- **Funci√≥n**: Conecta autom√°ticamente con el SII para descargar compras del mes actual
- **Par√°metros**: Utiliza empresa y fecha seleccionadas en el sistema
- **Indicador visual**: Animaci√≥n de carga especializada con mensaje "Procesando..."
- **Respuesta**: Mensaje de √©xito al completar la descarga

### 2.2 Asignaci√≥n Masiva de Centros de Costo

**Bot√≥n**: "Asignar Centro de Costo Masivo" (Info/Celeste)

**Proceso completo**:

1. **Di√°logo con filtros avanzados**:

   - Tipo de Documento: Factura de compra, Nota de d√©bito, etc.
   - Tipo de Compra: Normal, activo fijo, servicios, etc.
   - Rango de Fechas: Desde y hasta (documento, recepci√≥n, acuse)
   - Rango de Montos: M√≠nimo y m√°ximo
   - Proveedor: Filtrar por RUT o raz√≥n social espec√≠fica

2. **Selecci√≥n y confirmaci√≥n**:
   - Seleccionar el Centro de Costo a aplicar masivamente
   - **Vista previa**: Sistema muestra exactamente qu√© compras ser√°n afectadas
   - **Confirmar**: Aplica el centro de costo a todas las compras filtradas

### 2.3 Generaci√≥n Masiva de Asientos Contables

- **Bot√≥n**: "Generar Asientos Contables Masivo" (Info/Celeste)
- **Funci√≥n**: Crea autom√°ticamente todos los asientos contables para las compras del mes
- **Requisitos**: Las compras deben tener asignados tanto cuenta contable como centro de costo
- **Scope**: Procesa todas las compras elegibles del mes y a√±o actual
- **Validaci√≥n**: Solo genera asientos para registros completos y v√°lidos

## üìã Gesti√≥n Detallada de Compras Individuales

### 3.1 Informaci√≥n Completa por Compra

Cada fila de la tabla presenta:

- **Identificaci√≥n del Documento**: Tipo, folio, fechas m√∫ltiples
- **Datos del Proveedor**: RUT, raz√≥n social completa
- **Informaci√≥n Fiscal**: Montos netos, exentos, IVA recuperable/no recuperable
- **Datos Especializados**: Activos fijos, impuestos especiales, tabaco
- **Estado Contable**: Situaci√≥n del asiento (generado, pendiente, desbalanceado)

### 3.2 Campos Financieros Detallados

<CardGroup cols={2}>
  <Card title="Montos Base" icon="dollar-sign">
    Monto Exento, Monto Neto, valores sin IVA
  </Card>
  <Card title="IVA Diferenciado" icon="percent">
    IVA Recuperable vs IVA No Recuperable
  </Card>
  <Card title="Activos Fijos" icon="building">
    Montos e IVA de bienes de capital
  </Card>
  <Card title="Impuestos Especiales" icon="exclamation-triangle">
    Tabaco (puros, cigarrillos, procesado)
  </Card>
</CardGroup>

### 3.3 Acciones Individuales por Compra

#### Ver DTE (Documento Tributario Electr√≥nico)

- **Bot√≥n**: üëÅÔ∏è (√≠cono de ojo)
- **Funci√≥n**: Abre el documento original en formato XML
- **Contenido detallado**:
  - Datos completos del emisor y receptor
  - Detalle l√≠nea por l√≠nea de productos/servicios
  - C√°lculos de impuestos paso a paso
  - Totales y validaciones fiscales

#### Asignaci√≥n Individual de Centro de Costo

- **Campo**: Dropdown "Centro de Costo"
- **Opciones**: Lista completa de centros de costo de la empresa
- **Estado din√°mico**:
  - ‚úÖ **Activo**: Cuando no hay asiento generado
  - üîí **Bloqueado**: Una vez generado el asiento contable (fondo gris)

#### Asignaci√≥n Individual de Cuenta Contable

- **Campo**: Dropdown "Cuenta" (m√°s amplio que centro de costo)
- **Formato**: Muestra "(c√≥digo) nombre completo de la cuenta"
- **Opciones**: Plan de cuentas completo de la empresa
- **Estado din√°mico**: Similar al centro de costo

#### Gesti√≥n Avanzada de Asientos Contables

**Bot√≥n din√°mico**: "Generar Asiento" / "Ver Asiento"

**Estados del sistema**:

- üîµ **Azul**: "Generar Asiento" - Listo para crear
- üü¢ **Verde**: "Ver Asiento" - Asiento generado y balanceado
- üî¥ **Rojo**: "Ver Asiento" - Asiento desbalanceado (requiere atenci√≥n)

**Validaciones autom√°ticas**:

- ‚úÖ Centro de costo debe estar seleccionado
- ‚úÖ Cuenta contable debe estar asignada
- ‚ö†Ô∏è Sistema valida balance debe = haber

## üîç Funciones de Control y Navegaci√≥n

### 4.1 Filtro Inteligente por Estado de Asientos

- **Ubicaci√≥n**: Flecha en columna "Asiento"
- **Funci√≥n**: Ordena din√°micamente por estado contable
- **Opciones**:
  - ‚¨ÜÔ∏è **Ascendente**: Asientos generados primero
  - ‚¨áÔ∏è **Descendente**: Asientos pendientes primero

### 4.2 Sistema de Paginaci√≥n Avanzado

- **Opciones flexibles**: 10, 25, 50 registros por p√°gina
- **Navegaci√≥n**: Anterior/Siguiente con contador detallado
- **Informaci√≥n**: "Mostrando X-Y de Z registros totales"

### 4.3 Indicadores Visuales del Sistema

- **Asientos Pendientes**: Card destacado con n√∫mero en rojo/verde
- **Estados de carga**: Skeleton loaders para mejor UX
- **Animaciones**: Loader personalizado durante procesos largos

## üìÑ Visualizaci√≥n Avanzada de Documentos

### 5.1 Visor de DTE Especializado

**Caracter√≠sticas t√©cnicas**:

- **Formato**: XML estructurado del SII
- **Informaci√≥n completa**:
  - Datos del emisor (proveedor) y receptor (empresa)
  - Detalle completo de productos/servicios comprados
  - C√°lculos paso a paso de impuestos
  - Totales, subtotales y validaciones fiscales
- **Navegaci√≥n**: Scroll dentro del di√°logo para documentos extensos

### 5.2 Vista de Asientos Contables

- **Acceso**: Bot√≥n "Ver Asiento" (verde/rojo seg√∫n estado)
- **Contenido**: Detalle completo del asiento generado
- **Informaci√≥n**: Debe, haber, cuentas, fechas, referencias

## ‚ö†Ô∏è Sistema de Alertas y Validaciones

### 6.1 Alertas de Estado Cr√≠tico

- **Asiento Desbalanceado**: Banner rojo con mensaje "Asiento Desbalanceado"
- **Causa com√∫n**: Configuraci√≥n incorrecta del plan de cuentas
- **Soluci√≥n**: Revisar parametrizaci√≥n contable

### 6.2 Validaciones Preventivas

Al generar asientos individuales:

- **Sin centro de costo**: "Debe seleccionar un centro de costo para generar el asiento"
- **Sin cuenta**: "Debe seleccionar una cuenta para generar el asiento"
- **Asiento duplicado**: Sistema previene duplicaciones

### 6.3 Mensajes de Confirmaci√≥n

- **Compras obtenidas**: "Compras autom√°ticas generadas correctamente"
- **Asiento creado**: "Documento generado correctamente"
- **Asignaci√≥n masiva**: Confirmaci√≥n con n√∫mero de registros afectados

## üí° Mejores Pr√°cticas y Flujo Recomendado

### 7.1 Proceso Mensual Optimizado

1. **Inicio de mes**: Obtener compras autom√°ticas del SII
2. **Clasificaci√≥n**: Asignar centros de costo masivamente por tipo de gasto
3. **Contabilizaci√≥n**: Asignar cuentas contables por categor√≠a de compra
4. **Generaci√≥n**: Crear asientos masivamente
5. **Revisi√≥n**: Verificar asientos desbalanceados individualmente
6. **Cierre**: Confirmar que no queden asientos pendientes

<Tip>
  **Estrategia recomendada**: Procesa primero las compras recurrentes con
  asignaci√≥n masiva, luego revisa casos especiales individualmente.
</Tip>

### 7.2 Estrategias de Organizaci√≥n

**Centros de costo por**:

- **Tipo de gasto**: Operacional, administrativo, ventas
- **Ubicaci√≥n**: Sucursal, departamento, proyecto
- **Responsabilidad**: √Årea que autoriza el gasto

**Cuentas contables por**:

- **Naturaleza del gasto**: Servicios, materiales, activos
- **Deducibilidad fiscal**: Gastos aceptados/rechazados
- **Tipo de proveedor**: Nacional, extranjero, relacionado

### 7.3 Control de Calidad Mensual

- **Revisar diariamente**: Asientos desbalanceados
- **Verificar semanalmente**: Asignaciones de cuentas similares
- **Confirmar mensualmente**: Cero asientos pendientes antes de cierre
- **Auditar trimestralmente**: Consistencia en criterios de asignaci√≥n

## üîß Soluci√≥n de Problemas Comunes

### Problema: Compras no se descargan del SII

**Diagn√≥stico y soluci√≥n**:

- ‚úÖ Verificar conectividad con SII
- ‚úÖ Confirmar certificados digitales vigentes
- ‚úÖ Validar que existen compras en el per√≠odo
- ‚úÖ Revisar configuraci√≥n de empresa en sistema
- üìû Contactar soporte t√©cnico si persiste

### Problema: No se pueden generar asientos

**Lista de verificaci√≥n**:

- ‚úÖ Centro de costo debe estar asignado
- ‚úÖ Cuenta contable debe estar seleccionada
- ‚úÖ La compra no debe tener asiento previo
- ‚úÖ Plan de cuentas debe estar configurado correctamente

### Problema: Asientos aparecen desbalanceados

**Pasos de soluci√≥n**:

1. **Revisar configuraci√≥n**: Plan de cuentas de la empresa
2. **Verificar cuenta**: Que sea apropiada para el tipo de gasto
3. **Validar IVA**: Configuraci√≥n de cuentas de IVA recuperable/no recuperable
4. **Consultar contador**: Para revisar parametrizaci√≥n contable
5. **Documentar**: Para ajustes futuros en configuraci√≥n

<Warning>
  **Campos bloqueados (grises)**: Indica que ya existe un asiento contable
  generado. Para modificar, primero debe eliminar el asiento existente.
</Warning>

## üö® Casos Especiales y Consideraciones

### 9.1 Compras de Activos Fijos

- **Campos especiales**: "Importe neto de activos fijos", "IVA sobre activos fijos"
- **Tratamiento**: Requieren cuentas espec√≠ficas en balance
- **Consideraci√≥n**: IVA puede tener tratamiento diferencial

### 9.2 Impuestos Especiales

- **Tabaco**: Campos separados para puros, cigarrillos y procesado
- **Otros impuestos**: Valor y tasa configurables
- **Tratamiento**: Requieren cuentas espec√≠ficas seg√∫n tipo

### 9.3 IVA No Recuperable

- **Identificaci√≥n**: Campo espec√≠fico en la compra
- **Tratamiento contable**: Va directo a gasto, no a cuenta de IVA
- **Configuraci√≥n**: Requiere cuentas diferenciadas en plan de cuentas
